var Article={TopBinder:[],Init:function(){Article.SetScreen();var e=$("#articleText"),t=e.offset(),i=$(".articleMenu").width();$(".articleSection",e);$(".ModalTables").on("shown.bs.modal",function(){var e=$(".modal-body",this),t=$("table",e),i=e.outerWidth(),o=t.outerWidth();e.is("cached")||(t.addClass("table"),o>i?t.addClass("autoWidth"):t.removeClass("autoWidth")),e.addClass("cached")});var o={open:function(e){var t=$(".xref",e),i=t.next("span:eq(0)"),o=e.position(),a=(t.outerHeight(),o.left),n=e.closest("li");n.length>0&&n.addClass("zindexFix"),i.removeClass("closed").addClass("opened").css({left:a>300?-a/3:0}).fadeIn("fast")},close:function(e){var t=$(".xref",e).next("span:eq(0)"),i=e.closest("li");i.length>0&&i.removeClass("zindexFix"),t.removeClass("opened").addClass("closed")}};if(Article.IsTablet||Article.IsMobile){var a=!1,n=null;$("html").on("touchstart",function(e){$(".ref").each(function(){var e=$(this);o.close(e),a=!1})}),$(".ref").on("touchstart",function(e){e.stopPropagation();var t=$(this);null!==n&&t.get(0)===n.get(0)?a?a&&(o.close(t),a=!1):(n=t,o.open(t),a=!0):(null!==n&&o.close(n),n=t,o.open(t),a=!0)})}else $(".ref").on("mouseenter mouseleave",function(e){e.preventDefault();var t=$(this);"mouseenter"===e.type?o.open(t):o.close(t)});$(".thumb").on("mouseenter mouseleave",function(e){var t=$(this).parent().parent().find(".preview");"mouseenter"==e.type?t.fadeIn("fast"):"mouseleave"==e.type&&t.fadeOut("fast")}),$(".ModalTables").on("shown.bs.modal",function(){0==$("table td[colspan], table td[rowspan]",this).length&&$("table",this).addClass("table-hover")}),$(".collapseTitle").on("click",function(){var e=$(this).next(),t=$(this).find(".collapseIcon");e.is(":visible")?(e.slideUp("fast"),t.removeClass("opened")):(e.slideDown("fast"),t.addClass("opened"))}),$(".expandReduceText").on("click",function(e){e.preventDefault();var t=$("#articleText .ref"),i=$("#articleText .text"),o=$(this).data("expandreducetext");void 0===$(this).data("defaultwidth")&&$(this).data("defaultwidth",i.outerWidth()),1==o?(t.hide(),i.outerWidth("100%"),$(this).data("expandreducetext",!1)):(i.width(""),t.show(),$(this).data("expandreducetext",!0));var a=$(window).scrollTop();setTimeout(function(){Article.ArticleStructureBuilder(),Article.ArticleStructureSelect(a)},100)}),$(".articleTxt .xref:not(.big)").on("click",function(){var e=$(this).text();$(".ref-list");-1==e.indexOf(",")?(parseInt(e),e--):(e=(e=e.split(","))[0],parseInt(e),e--)}),Article.ArticleStructureBuilder(),t.top=t.top-25;var l=e.outerHeight(),r=$(".articleMenu").height();if(window.setTimeout(function(){r=$(".articleMenu").height()},200),$(window).scroll(function(){var e=$(window).scrollTop();Article.isScrolledIntoView(".floatingMenuCtt")?($(".floatingMenuItem").css({position:"absolute"}),$(".floatingMenu").css({position:"absolute"})):($(".floatingMenuItem").css({position:"fixed"}),$(".floatingMenu").css({position:"fixed"})),e>t.top?($(".articleMenu").addClass("fixed").width(i),e>l+t.top-r-46?$(".articleMenu").addClass("fixedBottom"):$(".articleMenu").removeClass("fixedBottom")):$(".articleMenu").removeClass("fixed"),Article.ArticleStructureSelect(e),$(".alternativeHeader").stop(!1,!1)}),""!=window.location.hash){var s=window.location.hash,c=window.scrollY;$(s).modal("toggle").on("hidden.bs.modal",function(){window.location.hash="",$("body,html").scrollTop(c)})}$("[data-toggle='modal']").on("click",function(){var e=$(this).data("target"),t=window.scrollY;"undefined"==e&&""==e||(window.location.hash=e),$(e).on("hidden.bs.modal",function(){window.location.hash="",$("body,html").scrollTop(t)})});var d=$(".downloadOptions li.group"),p=100/d.length;d.css("width",p+"%"),Article.fechaAutores();var u=!1;$(".short-link").mouseenter(function(e){if(!u){if(-1!==(t=window.location.href).indexOf("localhost"))var t="http://www.scielo.br";$.ajax({type:"GET",async:!1,url:"https://ref.scielo.org/api/v1/shorten",data:"url="+encodeURI(t),dataType:"jsonp",success:function(e){result=e,u=!0}})}});var f=new Clipboard(".short-link",{text:function(e){return result}});f.on("success",function(e){var t=$(e.trigger);t.addClass("copyFeedback"),setTimeout(function(){t.removeClass("copyFeedback")},2e3)}),f.on("error",function(e){var t=$(e.trigger);t.addClass("copyFeedbackError"),setTimeout(function(){t.removeClass("copyFeedbackError")},2e3)}),$("ul.floatingMenuMobile").on("click",function(){$(this).find(".fm-button-child").each(function(){$(this).addClass("tooltip-mobile-on")})});var h=!0;$("ul.floatingMenuMobile").on("focusout click",function(e){if(h){if("focusout"===e.type)return;h=!1,$(this).find(".fm-list").children("li").removeAttr("style"),$(this).find(".fm-button-main").addClass("fm-button-main-mobile-open")}else h=!0,$(this).find(".fm-list").children("li").css({opacity:0}),$(this).find(".fm-button-main").removeClass("fm-button-main-mobile-open")})},isScrolledIntoView:function(e){var t=$(window).scrollTop(),i=t+$(window).height(),o=$(e).offset().top;return o+$(e).height()<=i&&o>=t},ArticleStructureBuilder:function(){var e=$(".articleMenu"),t=$("#articleText .articleSection"),i=0,o="";Article.TopBinder=[],t.each(function(){var e=$(this).data("anchor"),t=$(this).find(".articleSectionTitle"),a=$(this).offset();if(0==$(this).find("a[name='articleSection"+i+"']").length&&$(this).prepend("<a name='articleSection"+i+"'></a>"),0==i?Article.TopBinder.push(0):Article.TopBinder.push(a.top),void 0===e)return!0;if(o+="<li "+(0==i?'class="selected"':"")+">",o+='\t<a href="#articleSection'+i+'">'+e+"</a>",t.length>1){var n=0;o+="<ul>",t.each(function(){var e=$(this).offset();Article.TopBinder.push(e.top),0==$(this).prev("a[name='as"+i+"-heading"+n+"']").length&&$(this).before("<a name='as"+i+"-heading"+n+"'></a>"),o+="<li>",o+='\t<a href="#as'+i+"-heading"+n+'">'+$(this).text()+"</a>",o+="</li>",n++}),o+="</ul>"}o+="</li>",i++}),e.html(o),$("a",e).on("click",function(e){e.preventDefault();var t=$(this).attr("href");t=t.replace("#","");var i=$("a[name="+t+"]").offset();$("html,body").animate({scrollTop:i.top-60},500)})},ArticleStructureSelect:function(e){for(var t=$(".articleMenu"),i=0,o=Article.TopBinder.length;i<o;i++){if(i==o-1&&e>=Article.TopBinder[i]-100){t.find("li").removeClass("selected"),t.find("li:eq("+i+")").addClass("selected");break}if(e<=Article.TopBinder[i]-100){t.find("li").removeClass("selected"),t.find("li:eq("+(i-1)+")").addClass("selected");break}}},Bindings:function(e){void 0===e&&(e=".article")},fechaAutores:function(){var e=$(".contribGroup"),t=$(".contribGroup .dropdown"),i=t.length;if(i>=10){var o=null,a=$(".outlineFadeLink"),n=t[0],l=t[i-1],r=i-2,s=$('<a data-toggle="tooltip" data-placement="top" title="+'+r+'"></a>');s.text("[...]"),s.css({padding:"10px",cursor:"pointer"});var c=$("<div></div>"),d=$("<a></a>");d.addClass("btn-fechar");var p=$("<span></span>");p.addClass("sci-ico-floatingMenuClose"),d.append(p),c.append(d);var u=$("<div></div>");u.append(n),u.append(s),u.append(l),u.append(a),e.text(""),e.append(u),s.on("click",function(){o.tooltip("disable"),e.textContent="";for(var n=0;n<i;n++)e.append(t[n]);e.append(a),e.append(c)}),d.on("click",function(){o.tooltip("enable"),Article.fechaAutores()}),o=$('[data-toggle="tooltip"]').tooltip()}e.css("opacity","1")},IsMobile:!1,IsTablet:!1,IsTabletPortrait:!1,IsDesktop:!1,IsHD:!1,isOldIE:!1,DetectMobile:function(e){var t={};return t.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i},t.detectMobileBrowsers.fullPattern.test(e)||t.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},DetectTablet:function(e){var t={};return t.detectMobileBrowsers={tabletPattern:/android|ipad|playbook|silk/i},t.detectMobileBrowsers.tabletPattern.test(e)},SetScreen:function(){var e=$(window).innerWidth(),t=window.matchMedia("(orientation: portrait)").matches;e>990&&(Article.IsDesktop=!0),e>1206&&(Article.IsHD=!0),Article.DetectMobile(navigator.userAgent)&&(Article.IsMobile=!0),Article.DetectTablet(navigator.userAgent)&&(Article.IsTablet=!0,Article.IsTabletPortrait=!!t,window.addEventListener("orientationchange",function(){0==screen.orientation.angle?Article.IsTabletPortrait=!0:Article.IsTabletPortrait=!1})),navigator.appVersion.indexOf("MSIE 8")>-1&&(Article.IsMobile=!1,Article.IsTablet=!1,Article.IsDesktop=!0,Article.IsOldIE=!0,Article.IsHD=!1)}};$(function(){$("body.article").length&&Article.Init()});